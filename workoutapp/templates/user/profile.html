{% extends 'base.html' %}
{% load static %}
{% block extra_head %}
    <link rel=stylesheet type="text/css" href="{% static 'profile/css/profile.css' %}">
{% endblock %}



{% block content %}

<div class="page-content">
<div class="container">
    <div class="row my-1">
        <div class="col-lg-8 order-lg-2">
            <div class="tab-content py-4">
                <div class="tab-pane active" id="profile">
                    <div class="row">
                        <div class="col-md-auto text-left">
                            <h1 class="text-left text-uppercase">{{ user.username }}</h1>
                            <h6>{{ user.email }}</h6>
                        </div>

                        <div class="col-md-auto text-right">
                            <h3>Find a user to follow</h3>
                            <form action="{% url 'searchbarUsers' %}" method="get">
                                <input type="text" name="search"/>
                                <button type="submit">Search</button>
                            </form>
                        </div>

                    </div>
                    <div class="col-md-auto text-right">
                    <!-- if current user is the same as the profile being viewed -->
                        {% if request.user == user %}
                            <a class='btn btn-primary' href="{% url 'user_friends' %}">My Friends</a>
                    <!-- if profile being viewed is not current user -->
                        {% else %}
                            {% if status == 'not_friends' %}
                                <a class='btn btn-primary' href="{% url 'send-request' user.id %}">Add Friend</a>
                            {% elif status == 'sent' %}
                                <a class="btn btn-warning" href="{% url 'cancel-request' user.id %}">Cancel Request</a>
                            {% elif status == 'received' %}
                                <a class="btn btn-warning" href="{% url 'user_friends' %}">Request received</a>
                            {% endif %}
                        {% endif %}
                    </div>

                    <div class="row">
                        <div class="col-md-auto text-left">
                            <h6>Full name: {{ user_info.firstName }} {{ user_info.lastName }}</h6>
                            <h6>Age: {{ user_info.age }}</h6>
                            <h6>Bio: {{ user_info.bio }}</h6>
                            <h6>Member since: {{ user_info.CreatedAt }}</h6>
                            {% if request.user == user %}
                                <a href="{% url 'edit-user' %} "><i class="fas fa-edit"></i>Edit User</a>
                            {% endif %}
                        </div>

                        <div class="col-md-12 mt-4">
                             <h5 class="text-left">My Exercises</h5>

                                     {% if exercises %}
                                     {% for exercise in exercises %}
                                         {% include 'exercise/single_exercise_minimal.html' with exercise=exercise %}
                                         {% if request.user == user %}
                                             <a href="{% url 'delete-exercise' exercise.id %}">
                                                 <button class="btn btn-primary" type="button"><span>Delete exercise</span></button>
                                             </a>
                                         {% endif %}
                                     {% endfor %}
                                     {% else %}
                                        <p>You haven't added any exercises!</p>
                                     {% endif %}

                            <!--still working on this. MUST work with css file or something -->

                             <h5 class="text-left">My Workouts</h5>
                                    {% if workouts %}
                                    {% for workout in workouts %}
                                        {% include 'workout/single_workout_minified.html' with workout=workout %}
                                        {% if request.user == user %}
                                            <a href="{% url 'delete-workout' workout.id %}">
                                                <button class="btn btn-primary" type="button"><span>Delete workout</span></button>
                                            </a>
                                        {% endif %}
                                    {% endfor %}
                                    {% else %}
                                        <p>You haven't added any workouts!</p>
                                     {% endif %}

                            <!--still working on this-->
                        </div>
                    </div>

                </div>
            </div>
        </div>
        <div class="col-lg-4 order-lg-1 text-center">
            <img src="{{ user_info.image }}" class="img-fluid" alt="avatar">
            {% if request.user == user %}
                <button class="btn btn-primary" type="button"><span>Change Photo</span></button>
            {% endif %}
            <!-- Needs javascript implementation for new profile picture -->
            <label class="custom-file">
                <input type="file" id="file" class="custom-file-input">
            </label>
        </div>
    </div>
</div>

</div>

{% endblock %}


{% block extra_js %}

<script src="{% static 'workout/js/rate_exercise.js' %}"></script>
{% endblock %}